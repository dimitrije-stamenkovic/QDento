CREATE TABLE note (patient_rowid INTEGER NOT NULL, tooth INT NOT NULL, text VARCHAR NOT NULL, PRIMARY KEY (patient_rowid, tooth), FOREIGN KEY (patient_rowid) REFERENCES patient (rowid) ON DELETE CASCADE ON UPDATE CASCADE);
CREATE TABLE notification (rowid INTEGER PRIMARY KEY, patient_rowid INTEGER REFERENCES patient (rowid) ON DELETE CASCADE ON UPDATE CASCADE, dentist_rowid INTEGER REFERENCES dentist (rowid) ON DELETE CASCADE ON UPDATE CASCADE, date TEXT, description TEXT);
CREATE TABLE financial (rowid INTEGER PRIMARY KEY, date TEXT NOT NULL DEFAULT '1900-01-01', num INTEGER NOT NULL, type INTEGER NOT NULL, recipient_id TEXT, recipient_name TEXT, recipient_phone TEXT, recipient_address TEXT, data TEXT NOT NULL);
CREATE TABLE patient (rowid INTEGER PRIMARY KEY, id TEXT NOT NULL, birth TEXT NOT NULL, sex INTEGER NOT NULL, fname TEXT NOT NULL, lname TEXT NOT NULL, address TEXT, phone TEXT, color TEXT);
CREATE TABLE favourite_code (procedure_code TEXT REFERENCES procedure_list (code) ON DELETE CASCADE ON UPDATE CASCADE, dentist_rowid INTEGER REFERENCES dentist (rowid) ON DELETE CASCADE ON UPDATE CASCADE);
CREATE TABLE company (name TEXT, identifier TEXT, address TEXT, vat INTEGER, currency TEXT, bank TEXT, iban TEXT, bic TEXT);
CREATE TABLE procedure_list (code TEXT NOT NULL UNIQUE PRIMARY KEY, name TEXT NOT NULL, type INTEGER NOT NULL, price REAL, diagnosis TEXT);
CREATE TABLE procedure (rowid INTEGER NOT NULL PRIMARY KEY, amblist_rowid INTEGER NOT NULL, code TEXT NOT NULL, name TEXT, type INTEGER, diagnosis TEXT, price REAL, notes TEXT, at_tooth_index INTEGER, "temporary" INTEGER, supernumeral INTEGER, from_tooth_index INTEGER, to_tooth_index INTEGER, post INTEGER, surface_o INTEGER, surface_m INTEGER, surface_d INTEGER, surface_b INTEGER, surface_l INTEGER, surface_c INTEGER, FOREIGN KEY (amblist_rowid) REFERENCES dental_visit (rowid) ON DELETE CASCADE ON UPDATE CASCADE);
CREATE TABLE appointment (rowid INTEGER PRIMARY KEY NOT NULL, dentist_rowid INTEGER REFERENCES dentist (rowid) ON DELETE CASCADE ON UPDATE CASCADE, patient_rowid INTEGER REFERENCES patient (rowid) ON DELETE SET NULL ON UPDATE CASCADE, start TEXT NOT NULL, end TEXT NOT NULL, summary TEXT, description TEXT);
CREATE TABLE dentist (rowid INTEGER PRIMARY KEY NOT NULL, pass TEXT NOT NULL, fname TEXT NOT NULL, lname TEXT NOT NULL, auto_login INTEGER DEFAULT (0));
CREATE TABLE dental_visit (rowid INTEGER NOT NULL PRIMARY KEY, patient_rowid INTEGER NOT NULL, dentist_rowid INTEGER REFERENCES dentist (rowid) ON DELETE SET NULL ON UPDATE CASCADE, date TEXT NOT NULL DEFAULT ('1900-01-01'), num INT NOT NULL, status TEXT, FOREIGN KEY (patient_rowid) REFERENCES patient (rowid) ON DELETE CASCADE ON UPDATE CASCADE);
CREATE TABLE periostatus (rowid INTEGER NOT NULL PRIMARY KEY, patient_rowid INTEGER NOT NULL REFERENCES patient (rowid) ON DELETE CASCADE ON UPDATE CASCADE, dentist_rowid INTEGER REFERENCES dentist (rowid) ON DELETE SET NULL ON UPDATE CASCADE, date TEXT NOT NULL DEFAULT '1900-01-01', data TEXT);
CREATE TABLE diagnosis (description TEXT);